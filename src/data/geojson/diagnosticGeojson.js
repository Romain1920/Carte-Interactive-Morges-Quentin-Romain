// Toutes les géométries diagnostic sont regroupées ici pour ne pas plomber src/app/main.js.

// Coordonnées du périmètre d’étude (polygone principal).
const zoneCoords = [
    [6.501450412415291, 46.511292415945086],
    [6.499424591895478, 46.51159613368384],
    [6.497261352993151, 46.51151939444321],
    [6.496758095499918, 46.511268297909396],
    [6.4962254892134625, 46.510826295068476],
    [6.495571369410231, 46.51000506091868],
    [6.495226510898121, 46.509149342485536],
    [6.495011584792374, 46.508113434212646],
    [6.495337961993485, 46.50709626291264],
    [6.495362662266068, 46.50627646339152],
    [6.496114711894938, 46.505621501513424],
    [6.496979003785363, 46.50521311116872],
    [6.4985990680766905, 46.505691408172424],
    [6.499519390541594, 46.5059110226022],
    [6.500215671573158, 46.506672202208755],
    [6.500300362680759, 46.50762913542213],
    [6.501264950087629, 46.508240619707166],
    [6.502390058702923, 46.50934288196913],
    [6.5027034663427985, 46.510361741089454],
    [6.502318737378544, 46.51109826086595],
    [6.501450412415291, 46.511292415945086],
  ];

// Même périmètre mais empaqueté dans un FeatureCollection pour MapLibre.
const focusZone = {
    type: "FeatureCollection",
    features: [
      {
        type: "Feature",
        properties: { name: "Périmètre" },
        geometry: { type: "Polygon", coordinates: [zoneCoords] },
      },
    ],
  };

// Polygone utilisé pour découper les rasters (même chose que zoneCoords).
const noiseMaskCoords = [
    [6.501450412415291, 46.511292415945086],
    [6.499424591895478, 46.51159613368384],
    [6.497261352993151, 46.51151939444321],
    [6.496758095499918, 46.511268297909396],
    [6.4962254892134625, 46.510826295068476],
    [6.495571369410231, 46.51000506091868],
    [6.495226510898121, 46.509149342485536],
    [6.495011584792374, 46.508113434212646],
    [6.495337961993485, 46.50709626291264],
    [6.495362662266068, 46.50627646339152],
    [6.496114711894938, 46.505621501513424],
    [6.496979003785363, 46.50521311116872],
    [6.4985990680766905, 46.505691408172424],
    [6.499519390541594, 46.5059110226022],
    [6.500215671573158, 46.506672202208755],
    [6.500300362680759, 46.50762913542213],
    [6.501264950087629, 46.508240619707166],
    [6.502390058702923, 46.50934288196913],
    [6.5027034663427985, 46.510361741089454],
    [6.502318737378544, 46.51109826086595],
    [6.501450412415291, 46.511292415945086],
  ];

// Version FeatureCollection du masque (utile pour dessiner/clipper dans MapLibre).
const maskGeoJson = {
    type: "FeatureCollection",
    features: [
      {
        type: "Feature",
        properties: {},
        geometry: { type: "Polygon", coordinates: [noiseMaskCoords] },
      },
    ],
  };

// Axes routiers principaux (flux auto qui encerclent la vieille ville).
const diagnosticAutoAxesPrimary = {
    type: "FeatureCollection",
    features: [
      {
        type: "Feature",
        properties: {},
        geometry: {
          type: "LineString",
          coordinates: [
            [6.474839622244019, 46.493642238119484],
            [6.47735599188198, 46.49452043654931],
            [6.478797765427117, 46.49502613057504],
            [6.479385155059588, 46.49520279606368],
            [6.479619375863617, 46.49524715907624],
            [6.479748154398119, 46.495248247994915],
            [6.479799177604374, 46.49526395558212],
            [6.479855423826848, 46.4953099196428],
            [6.479877727114688, 46.4953611153818],
            [6.480034797718099, 46.49545490018396],
            [6.4802520870634215, 46.49555023069777],
            [6.480823266709247, 46.495858065216986],
            [6.481182408575122, 46.4961176553957],
            [6.48136337407637, 46.49629007323155],
            [6.481540810355163, 46.4965237674253],
            [6.481664514645869, 46.49676216463758],
            [6.481710611217749, 46.496905987220636],
            [6.481752906008254, 46.497185993578064],
            [6.48179173528566, 46.49742374723091],
            [6.481896534295776, 46.49772470554146],
            [6.4820707375949675, 46.497974827711516],
            [6.482373757501781, 46.49832495050909],
            [6.483583352885218, 46.49958398322486],
            [6.485176762234154, 46.50127234762636],
            [6.486200157360231, 46.502374406265766],
            [6.487347121131406, 46.50355623220471],
            [6.487443635693804, 46.50360322548588],
            [6.487556412457881, 46.503634052481566],
            [6.487593758017062, 46.50366701115968],
            [6.487592898928529, 46.50371586314956],
            [6.487580302017805, 46.503761238201896],
            [6.487632752489369, 46.50385449023871],
            [6.487716500007342, 46.50397988232896],
            [6.488387277551905, 46.504649528701684],
            [6.488746972632817, 46.50504782373708],
            [6.489213027764201, 46.50551317269589],
            [6.489505980463514, 46.50581166832688],
            [6.489688373099756, 46.50592994838237],
            [6.4898518579782465, 46.50599742687603],
            [6.489971968808729, 46.506022755980204],
            [6.49010160952103, 46.50603729587215],
            [6.490175077142484, 46.506089658155275],
            [6.490224510243238, 46.50617727320223],
            [6.490323132204918, 46.50624331041021],
            [6.490579034032954, 46.506346511184276],
            [6.490940040708113, 46.50648593552932],
            [6.492415130260124, 46.50703595786496],
            [6.492877685761369, 46.507169342454766],
            [6.493541118966697, 46.507319246987834],
            [6.494427241918245, 46.50743913175027],
            [6.4952632573376246, 46.50754329573604],
            [6.495833304717024, 46.50762017322173],
            [6.4960804814057065, 46.50766214538774],
            [6.496177713927303, 46.50767186387876],
            [6.49628049469085, 46.50767152312231],
            [6.496369190411577, 46.507651528442125],
            [6.496439281218816, 46.5076159293438],
            [6.496687607681032, 46.50748362325916],
            [6.496841577990994, 46.50739675695372],
            [6.496959049002552, 46.507342891399844],
            [6.497063066820048, 46.50732003222665],
            [6.497159350293559, 46.50732968810843],
            [6.497239783591077, 46.50736951016658],
            [6.497348790417893, 46.5074666078319],
            [6.497531770845895, 46.50764136160583],
            [6.497745437356253, 46.50780216835865],
            [6.498381672858625, 46.50824925461041],
            [6.498851197936747, 46.508618569433786],
            [6.499388033681961, 46.50912917656954],
            [6.4997718009017635, 46.50955082766737],
            [6.499824566100056, 46.50963792699769],
            [6.499879714739514, 46.509763104644215],
            [6.499941033070823, 46.51012420332548],
            [6.500012577695479, 46.51058426532287],
            [6.499975604561353, 46.51076928517859],
            [6.499988039860622, 46.51112393412441],
            [6.5000002822667335, 46.511506193498455],
            [6.500018123880395, 46.51161537002585],
            [6.500064468019439, 46.51178920445897],
            [6.500134742705253, 46.51193357682116],
            [6.500224654575351, 46.512081471013964],
            [6.500334257405475, 46.512207305436085],
            [6.500529056441777, 46.512372747267115],
            [6.500896930519526, 46.5126962869166],
            [6.501241375829205, 46.5129751553904],
            [6.5015509394634865, 46.51323832120664],
            [6.5019202569014745, 46.51357581956797],
            [6.502137931661333, 46.513758974433166],
            [6.503597513880036, 46.514989074922894],
            [6.503808161750254, 46.515157306942484],
            [6.5040721653130324, 46.51533089936704],
            [6.504311453866098, 46.515467326487574],
            [6.504832514787893, 46.515692381620816],
            [6.507020769233695, 46.516486659653026],
            [6.507549923798702, 46.51660691872452],
            [6.508344456039478, 46.51671773647926],
            [6.5091265827641, 46.51680774749326],
            [6.511457378149446, 46.51707080992839],
            [6.51342351064418, 46.51732308631228],
            [6.51361794185126, 46.51733528138816],
            [6.515097943657829, 46.517511262605396],
            [6.516427012497767, 46.5176662585842],
            [6.517764641940617, 46.51780878998678],
            [6.518809611051572, 46.517872834768795],
            [6.519359276853446, 46.51787392287972],
            [6.519878393925015, 46.51785616304679],
            [6.522130179489783, 46.51774606527359],
            [6.524627498111353, 46.51761260454519],
            [6.524841456080882, 46.5175823523823],
            [6.525002104651047, 46.51754149027067],
            [6.525100333618061, 46.51749739101084],
            [6.525276757246492, 46.51748884858944],
            [6.525446066351918, 46.517488516704674],
            [6.525985166901851, 46.51738803550958],
          ],
        },
      },
    ],
  };

// Axes secondaires du diagnostic (trafic important mais un cran en dessous).
const diagnosticAutoAxesSecondary = {
    type: "FeatureCollection",
    features: [
      {
        type: "Feature",
        properties: {},
        geometry: {
          type: "LineString",
          coordinates: [
            [6.521726909130038, 46.51778626113868],
            [6.520813817843157, 46.51783065853215],
            [6.519418332648826, 46.51789986825811],
            [6.518893037347558, 46.517917500513306],
            [6.5184044916196076, 46.51790999190509],
            [6.517411492124747, 46.51781789898482],
            [6.517065647654154, 46.5177851598589],
            [6.5168325057775105, 46.517734483929466],
            [6.515799386145899, 46.51761738106768],
            [6.513477563787053, 46.51735186956948],
            [6.511480500514598, 46.51710151632039],
            [6.509293794530041, 46.516856463163194],
            [6.508896375071936, 46.516849503085815],
            [6.508621915142371, 46.51680828483323],
            [6.507501017933429, 46.51664220078099],
            [6.5069119632437795, 46.516502466111085],
            [6.50580020766523, 46.516103064146904],
            [6.504437936180417, 46.515578670069154],
            [6.50415114219732, 46.51543670356163],
            [6.503790377740609, 46.515206391498076],
            [6.503384723525724, 46.51488494446459],
            [6.502658860690346, 46.514261153236966],
            [6.501877076632802, 46.51360084215247],
            [6.501473048909835, 46.51326257443014],
            [6.501310010339687, 46.51311285947171],
            [6.500783216540129, 46.51267052543691],
            [6.500424500708535, 46.51235893869402],
            [6.500262550694509, 46.51219346683935],
            [6.500119780541846, 46.51199839903111],
            [6.500013880545918, 46.511794119761],
            [6.499986123088533, 46.511711230016914],
            [6.4999333108080775, 46.51149797548117],
            [6.499931914355522, 46.51139223338985],
            [6.4999368116902465, 46.51128839534074],
            [6.4999288938122275, 46.511166008934204],
            [6.4998889100325865, 46.51109312822637],
            [6.499827589968525, 46.51105450969969],
            [6.499717297565654, 46.51104649476461],
            [6.499211856875037, 46.511136269339595],
            [6.4988993598324285, 46.511203574182545],
            [6.498648336866, 46.51121450505296],
            [6.498499428451175, 46.5111882397002],
            [6.498291740970021, 46.51113155330125],
            [6.498050207054968, 46.511059281714004],
            [6.497849784516094, 46.51095253225261],
            [6.497754817746535, 46.51087785938315],
            [6.49746067513977, 46.51064656308589],
            [6.496973387399011, 46.51025937252292],
            [6.496899720391048, 46.51019485243167],
            [6.496607704451221, 46.509649071568006],
            [6.496393854510477, 46.50924048548982],
            [6.496205486642244, 46.50889179170755],
            [6.496158713724916, 46.508761438830355],
            [6.496151459785388, 46.50866337910858],
            [6.496171274096636, 46.508481443344365],
            [6.4961961933903, 46.50817859441828],
            [6.496212632242931, 46.50802415000929],
            [6.4962277614305615, 46.50790250293961],
            [6.496211728539376, 46.50785638691791],
            [6.4961865019480705, 46.507811835622825],
            [6.496137015015498, 46.507780605246694],
            [6.496051754501026, 46.50773731920063],
            [6.4959163162829805, 46.507697776851494],
            [6.49483509943577, 46.50754833301149],
            [6.49437726277191, 46.507485632365025],
            [6.49359819056161, 46.50736908075702],
            [6.493157814903147, 46.50728479256164],
            [6.492777594461227, 46.507193272786886],
            [6.492460912693525, 46.507115439096786],
            [6.4916703949158165, 46.506883279031804],
            [6.491033113971361, 46.50666779255719],
            [6.490692891260315, 46.50651924197197],
            [6.490308237109609, 46.50634061013371],
            [6.4901685237666085, 46.50628089246222],
            [6.490106272564626, 46.50628097284407],
            [6.490013585358062, 46.50628863876375],
            [6.489904619114196, 46.50628050581216],
            [6.4898603475968875, 46.506263559194366],
            [6.489807946016262, 46.50622265876369],
            [6.489787815511246, 46.50617546379824],
            [6.489763922281316, 46.50612285013564],
            [6.489686509297527, 46.50606436286396],
            [6.489396925345237, 46.50577773600797],
            [6.4890647089145, 46.50544074051334],
            [6.488655215665689, 46.50501731600521],
            [6.488387748916604, 46.50476931582458],
            [6.48761100313935, 46.503934734424575],
            [6.487537429687235, 46.50387614077674],
            [6.4874759681428875, 46.503826848739884],
            [6.4874083936956985, 46.50379872395064],
            [6.48734498873844, 46.50376705315254],
            [6.48730760381606, 46.503735467019695],
            [6.487291233719115, 46.50370236682109],
            [6.487294491016761, 46.503668218856106],
            [6.48727584860803, 46.50362340093035],
            [6.487216479365852, 46.50349859979418],
            [6.486827014595505, 46.503077553854304],
            [6.486182679022653, 46.502415951083655],
            [6.485835495716196, 46.502047153889364],
            [6.485337544588732, 46.501527471992304],
            [6.485057088521424, 46.50121675523302],
            [6.484586666840533, 46.50074167248584],
            [6.484318986746172, 46.50049085445436],
            [6.484207919903419, 46.50036601025136],
            [6.483999364318606, 46.50010372568466],
            [6.483770031376186, 46.49985565975677],
            [6.4834108525886895, 46.499476833527645],
            [6.483017069768051, 46.49905817405203],
            [6.482616987929087, 46.49863139794889],
            [6.482234719184772, 46.498234277532625],
            [6.482074935302258, 46.498039550744046],
            [6.481976191217461, 46.497910146271394],
            [6.4818746632756, 46.497758911566926],
            [6.48179527545893, 46.49754882647743],
            [6.4817502640514935, 46.497403792644214],
            [6.481701867011545, 46.49708266542362],
            [6.481660661271828, 46.49690830230212],
            [6.481597695399632, 46.49670886572515],
            [6.48149413870613, 46.496530574445785],
            [6.481371949074853, 46.49636989697665],
            [6.48123848834053, 46.49621300341585],
            [6.480834102769592, 46.49590714056319],
            [6.480635674565832, 46.49579274251283],
            [6.480328812992505, 46.49562750528244],
            [6.4801480765523864, 46.495554518948346],
            [6.479936451120019, 46.49547699767516],
            [6.479814785596341, 46.49544063068585],
            [6.479697428502158, 46.495439316373904],
            [6.47964547541177, 46.495430892310864],
            [6.479597668871016, 46.495406523551736],
            [6.479540389865051, 46.49535850364645],
            [6.479471150644604, 46.49531266259342],
            [6.4792197954136155, 46.495193719757005],
            [6.478946065201659, 46.49509730932316],
            [6.478131668441033, 46.49481783153197],
            [6.477542504995659, 46.49461612010145],
            [6.476958516381149, 46.49441050703701],
            [6.476051952918704, 46.494091864028476],
            [6.475353311047611, 46.493853107519456],
            [6.4748875149084535, 46.49369564027114],
          ],
        },
      },
    ],
  };

// Dernier niveau d’axes : rues locales mais qui participent au sentiment d’enclavement.
const diagnosticAutoAxesTertiary = {
    type: "FeatureCollection",
    features: [
      {
        type: "Feature",
        properties: {},
        geometry: {
          type: "LineString",
          coordinates: [
            [6.496921308213458, 46.50736438019211],
            [6.496972357449504, 46.507282454637675],
            [6.497080035263552, 46.50720716057103],
            [6.497234517511708, 46.507115383206084],
            [6.497410213294337, 46.5070128297491],
            [6.497499210408182, 46.50700085699905],
            [6.497583546618866, 46.507001806331445],
            [6.497685032031424, 46.50703858667231],
            [6.498046358516017, 46.50723674458778],
            [6.500218522408775, 46.508589335944464],
            [6.500342588423238, 46.50868238362723],
            [6.50053915052786, 46.5088976904071],
            [6.500866094023121, 46.50937301829305],
            [6.501130139634095, 46.509755462565465],
            [6.501571251116731, 46.51036499186972],
            [6.501629765152895, 46.51045878036702],
            [6.501647330971985, 46.51051516293315],
            [6.501649905752865, 46.51057257867588],
            [6.501636810750851, 46.51062879515584],
            [6.501603371600973, 46.51068032652204],
            [6.501555146196, 46.51072669564033],
            [6.501478051543527, 46.51077337863253],
            [6.501400621392773, 46.51080276949331],
            [6.501288743575033, 46.51082927637119],
            [6.499988092255196, 46.511026604203785],
          ],
        },
      },
    ],
  };

// Petits cônes qui matérialisent les vues intéressantes vers le lac.
const coneBaseData = [
  {
    coordinates: [6.502018594868456, 46.512924952548545],
    bearing: 100,
    title: "Arrivée par l'est",
    description: "Apperçu du littoral en approche du site par l'Est. Accès impossible mais vue agréable. ",
    image: "https://vl7zgyqezaiej8w4.public.blob.vercel-storage.com/20251009_145607.jpg",
  },
  {
    coordinates: [6.501356850392333, 46.5110231303041],
    bearing: 50,
    title: "Perspective sur la baie et la Marina",
    description:
      "Dégagement de la vue et accès en trompe l'oeil. Vue dégagé et emplacement idéal en bordure de baie mais malgré un aménagement laissant espérer la possibilité de baignade celle-ci est interdite par la présence d'une petite Marina ",
    image: "https://vl7zgyqezaiej8w4.public.blob.vercel-storage.com/20251009_145505.jpg",
  },
  {
    coordinates: [6.501943833511341, 46.51057462619408],
    bearing: 180,
    title: "Entrée sur les quais Igor Starvinsky et Lochmann depuis l'Est",
    description:
      "On retrouve la même relation limitée que depuis l'approche par l'Est, accès et relation avec le Lac physiquement impossible sauf qu'ici, la croissance des massifs végétaux esthétique, empêche à plusieurs points la vue sur la Lac.",
    image: "https://vl7zgyqezaiej8w4.public.blob.vercel-storage.com/20251009_153431.jpg",
  },
  {
    coordinates: [6.499741357559488, 46.50800873941242],
    bearing: 160,
    title: "Accès au Lac",
    description:
      "Depuis l'approche de l'Est jusqu'au parc de l'indépendance, ce petit espace est le seul permettant l'accès direct au Lac pour les usagers. Bien que très minéralisé et limité dans son approche, il montre le potentiel d'un traitrement différent du littoral sur le reste du littoral. ",
    image: "https://vl7zgyqezaiej8w4.public.blob.vercel-storage.com/20251009_153921.jpg",
  },
  {
    coordinates: [6.499049572322902, 46.50769169116244],
    bearing: 190,
    title: "Vue sur le port de Morges",
    description:
      "Lieu emblématique du littoral morgien, ce port, malgré l'accès limité au Lac qu'il impose, offre une vue superbe en bordure de vielle ville avec ses tourelles et ses drapeaux, il amène beaucoup de cachet à la place de la Navigation",
    image: "https://vl7zgyqezaiej8w4.public.blob.vercel-storage.com/20251009_154108.jpg",
  },
  {
    coordinates: [6.4969549392799255, 46.50530171580491],
    bearing: 200,
    title: "Fin de parcours au Parc de l'Indépendance ",
    description:
      "La vue dégagée malgrée la digue d'enrochement et la rembarde démontre le gain visuel d'un littoral aménagé pour favoriser la vue. Malgré tout, le traitement très minéral laisse encore du potentiel gagnerait à être renaturé en partie",
    image: "https://vl7zgyqezaiej8w4.public.blob.vercel-storage.com/20251009_154735.jpg",
  },
];

const degToRad = (value) => (value * Math.PI) / 180;

const destinationFromPoint = (center, distance, bearingDeg) => {
  const bearingRad = degToRad(bearingDeg);
  const latRad = (center[1] * Math.PI) / 180;
  const angularDistance = distance / 6378137;
  const destLat = Math.asin(Math.sin(latRad) * Math.cos(angularDistance) + Math.cos(latRad) * Math.sin(angularDistance) * Math.cos(bearingRad));
  const destLng =
    (center[0] * Math.PI) / 180 +
    Math.atan2(Math.sin(bearingRad) * Math.sin(angularDistance) * Math.cos(latRad), Math.cos(angularDistance) - Math.sin(latRad) * Math.sin(destLat));
  return [destLng * (180 / Math.PI), destLat * (180 / Math.PI)];
};

const createConePolygon = (center, bearingDeg) => {
  const halfSpread = 22;
  const longDistance = 85;
  const steps = 6;
  const coords = [center];
  for (let i = 0; i <= steps; i += 1) {
    const angle = bearingDeg - halfSpread + (2 * halfSpread * i) / steps;
    coords.push(destinationFromPoint(center, longDistance, angle));
  }
  coords.push(center);
  return [coords];
};

// Petits polygones pour marquer les points de vue vers le lac (utilisés dans l’UI).
const diagnosticLakeViews = {
    type: "FeatureCollection",
    features: coneBaseData.map((view, index) => ({
      type: "Feature",
      properties: {
        id: `lake-view-${index}`,
        title: view.title,
        description: view.description,
        image: view.image,
      },
      geometry: { type: "Polygon", coordinates: createConePolygon(view.coordinates, view.bearing) },
    })),
  };

// Polygones des surfaces de stationnement existantes (diagnostic).
const diagnosticParkingSurfaces = {
    type: "FeatureCollection",
    features: [
      {
        type: "Feature",
        properties: {},
        geometry: {
          type: "Polygon",
          coordinates: [
            [
              [6.496740361875448, 46.507307623459496],
              [6.496768392153997, 46.50728407218919],
              [6.4954880716186105, 46.50642135143851],
              [6.495465022385507, 46.506458578761105],
              [6.496740361875448, 46.507307623459496],
            ],
          ],
        },
      },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.497048890965973, 46.50637461256626],[6.497120837430418, 46.50634940879405],[6.497291606564025, 46.506599347678346],[6.4972562769224975, 46.506612102561164],[6.497433247526717, 46.506864619366844],[6.497393240131134, 46.50687446792284],[6.497048890965973, 46.50637461256626]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.497356749050932, 46.50658229988694],[6.497425291718445, 46.50657049177478],[6.497448461380746, 46.50663090271072],[6.497512888637701, 46.50673566732606],[6.49760988016013, 46.50684651448538],[6.497644743757171, 46.50688248299684],[6.4975828930412245, 46.50690601729481],[6.497509619207129, 46.5068337485783],[6.49745131504717, 46.506764924906946],[6.497398259448947, 46.506686681117586],[6.497366219812396, 46.50662240829983],[6.497356749050932, 46.50658229988694]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.499051326506605, 46.50781259554588],[6.499068436141735, 46.507799221803204],[6.499969854757954, 46.50837227160071],[6.499947967917399, 46.50838904982367],[6.499051326506605, 46.50781259554588]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.499083776364201, 46.50791485565012],[6.499103092447411, 46.507899574417536],[6.499867169826933, 46.508384354882615],[6.499845439853742, 46.50840118358256],[6.499083776364201, 46.50791485565012]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500045221756753, 46.508447150937776],[6.500198222983621, 46.5085474774866],[6.5002215133185635, 46.5085325311615],[6.500064539175866, 46.50843589326747],[6.500045221756753, 46.508447150937776]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.499990665306125, 46.50849751028372],[6.500011314967364, 46.508478996362356],[6.500150334852286, 46.50856993341489],[6.500289791593351, 46.50866299997369],[6.500339564803219, 46.50870724733008],[6.500312543906875, 46.50871865920289],[6.500239553081174, 46.50866052859827],[6.50016026682223, 46.50860794743323],[6.499990665306125, 46.50849751028372]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500309853321718, 46.50861852906085],[6.500331415033887, 46.50861022071965],[6.500477832637929, 46.50874331819517],[6.500536864446481, 46.50880985504229],[6.50060826910619, 46.50890223891017],[6.500710832787258, 46.50905217874996],[6.500817568841892, 46.50920457072836],[6.500895686115237, 46.50932758309269],[6.501056028495521, 46.50955662252595],[6.50129384778404, 46.50989147371732],[6.501263952471775, 46.50989838151396],[6.500970375420416, 46.50949009433429],[6.500895260281113, 46.509380021381034],[6.500800902267798, 46.50923994001017],[6.500636454213835, 46.50899976501515],[6.500567755527532, 46.50890160518008],[6.500515575772803, 46.50883322737156],[6.500463263677317, 46.50877424530766],[6.5004081206819295, 46.50871650138755],[6.500335578015516, 46.50865336335967],[6.500309853321718, 46.50861852906085]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.5003672242107005, 46.50877285004121],[6.500389704710833, 46.50876409947573],[6.500495795830922, 46.5088767166852],[6.500604064595328, 46.50902578661127],[6.500826248668611, 46.5093520467776],[6.5007954490280255, 46.50936180749891],[6.50070438764101, 46.509229755042966],[6.500644496899101, 46.509142569010834],[6.5005714062046955, 46.509041536820526],[6.500521280029216, 46.5089703716987],[6.500464186601584, 46.50889155131601],[6.500409335416564, 46.50882167541579],[6.5003672242107005, 46.50877285004121]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500851312459859, 46.50943553681151],[6.5008786118988064, 46.509428034857365],[6.501031831905596, 46.509651315475146],[6.501142336435905, 46.50980341848654],[6.501211751297834, 46.50991588298614],[6.501186104087224, 46.5099223128007],[6.501130372334297, 46.5098446918115],[6.501064397269792, 46.50975460574635],[6.500987701765003, 46.509645233172535],[6.500937218061845, 46.509573488967796],[6.500892158802477, 46.509500946183344],[6.500851312459859, 46.50943553681151]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.501361685195061, 46.51017212087246],[6.5013837712299525, 46.510165303149826],[6.501486798005686, 46.51030992914595],[6.501561898739559, 46.51041715860893],[6.501587169531399, 46.51046065828941],[6.501607655259544, 46.51054443287434],[6.501598778070352, 46.510605256413704],[6.501563612371354, 46.510661034341055],[6.5015079681251216, 46.51071485943747],[6.501429847858608, 46.51076450167224],[6.501342086424611, 46.510790986709],[6.500170918453973, 46.51097994875673],[6.500164149079322, 46.510952953203414],[6.500525803751438, 46.510896087876084],[6.500856812226572, 46.51084473831097],[6.501005376840941, 46.51082039031675],[6.501167085436436, 46.510796224550454],[6.501292229522415, 46.51077989170784],[6.501368300245436, 46.51076128725962],[6.5014180001508635, 46.51074414465927],[6.501462914075403, 46.510713868740176],[6.50151503208928, 46.51067290953205],[6.501543516106236, 46.51063526571238],[6.501561625553969, 46.510596815782975],[6.501569488000827, 46.51056018587941],[6.501562652288985, 46.510509666083415],[6.50154724134294, 46.510462600150724],[6.501498677668087, 46.510382480258784],[6.501361685195061, 46.51017212087246]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.501491054540114, 46.51022456437893],[6.50151951882182, 46.51021536049586],[6.501643390692208, 46.51039778816487],[6.501693832702062, 46.51049201177186],[6.501696222485224, 46.510574698593935],[6.501681481462212, 46.510651698580205],[6.501636088153621, 46.51070847441429],[6.501608458497439, 46.510740288295366],[6.501500743382492, 46.51080297315163],[6.501486110389085, 46.51078678904266],[6.501563772468225, 46.510741556768565],[6.5015895840711275, 46.510728303726616],[6.50165704327341, 46.51064855537692],[6.501669008584849, 46.510577531136946],[6.501665899021261, 46.51049349947401],[6.501623847307214, 46.51042147733526],[6.501491054540114, 46.51022456437893]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500279244819434, 46.51105743210047],[6.500287145738467, 46.51100895987766],[6.501220895775314, 46.51086306890128],[6.501213723431084, 46.510910668663044],[6.500279244819434, 46.51105743210047]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500637992006449, 46.51032396006996],[6.500689625757229, 46.510350827528335],[6.500716554806562, 46.5103867875989],[6.500785518889611, 46.51049324070504],[6.500820202035163, 46.51053696573563],[6.500697343337924, 46.51055972352111],[6.500108349286399, 46.51066520214356],[6.500091675335025, 46.510592022510686],[6.500090965371463, 46.51055051189339],[6.500078349651393, 46.51042156779],[6.500637992006449, 46.51032396006996]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500719256343859, 46.510289571420294],[6.5007279066936, 46.510306145436815],[6.5012168341680825, 46.51015912367535],[6.501199358859231, 46.51013632698933],[6.500719256343859, 46.510289571420294]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.499752078824764, 46.508580298218114],[6.499895486553617, 46.50848091685109],[6.499920339375193, 46.508497055725705],[6.499776516924073, 46.50859569923192],[6.499752078824764, 46.508580298218114]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.499303851473064, 46.50887601499277],[6.499319613738914, 46.50889304862951],[6.4995079907814, 46.50876817939791],[6.4994871478837, 46.508753257904495],[6.499303851473064, 46.50887601499277]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.496640162317334, 46.50924990395242],[6.496774174085218, 46.50917668852632],[6.496834555609934, 46.50921136471872],[6.496710994865175, 46.50928093331916],[6.496640162317334, 46.50924990395242]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.496866394433032, 46.50912242753314],[6.496928927571275, 46.509153230531886],[6.497117720571311, 46.50904751486777],[6.497046149557593, 46.50901293781023],[6.496866394433032, 46.50912242753314]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.496715244588168, 46.509320611597104],[6.496737154386472, 46.509340018320835],[6.496998216519024, 46.509209711126346],[6.496984795311062, 46.509177109425444],[6.496715244588168, 46.509320611597104]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.497091419414323, 46.509122311642955],[6.497107753444589, 46.50914754306005],[6.497246057203961, 46.509102608960056],[6.49721970120836, 46.50907808870803],[6.497091419414323, 46.509122311642955]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.496560519944998, 46.50943649055277],[6.496710798587506, 46.509356652831954],[6.496960897421311, 46.50922833874768],[6.497125845497345, 46.5093859041808],[6.497118737742755, 46.50942832009043],[6.496658860035441, 46.50963300490392],[6.496560519944998, 46.50943649055277]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.4993932450713165, 46.510925157987735],[6.499418337076975, 46.51095864483894],[6.499743477786177, 46.51088622118962],[6.499816979957311, 46.51082005695572],[6.4993932450713165, 46.510925157987735]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.497023359347758, 46.50883519180194],[6.4970525341700895, 46.50882143003934],[6.497173843948585, 46.50893890328013],[6.497148350149024, 46.50895522933666],[6.497023359347758, 46.50883519180194]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.496585817946269, 46.50865209421825],[6.496671747418135, 46.508669356000844],[6.496503768613792, 46.50873785766834],[6.496420488678218, 46.50872305659555],[6.496585817946269, 46.50865209421825]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.497646498080617, 46.507776035869604],[6.497668216985971, 46.50776049160596],[6.498132368853707, 46.50809890389966],[6.498107513471996, 46.508113853518246],[6.497646498080617, 46.507776035869604]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.497956750409664, 46.50790699943587],[6.497982568907606, 46.50789291092877],[6.4982295704064015, 46.508062400357446],[6.498206405441348, 46.50807635985183],[6.497956750409664, 46.50790699943587]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.498717619702687, 46.508598284200126],[6.4987301220732645, 46.50856985366492],[6.498735187147234, 46.50855649498985],[6.498909245518473, 46.50869884377718],[6.498885973835872, 46.50873412092391],[6.498717619702687, 46.508598284200126]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.499049382020411, 46.50889280770666],[6.4990806281949824, 46.50887746205363],[6.499208859453438, 46.509019621837034],[6.4991875928390535, 46.5090302426499],[6.499049382020411, 46.50889280770666]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.499322842819743, 46.50916367625139],[6.499355017852305, 46.50915191497672],[6.499508791883503, 46.5093026257625],[6.49947172277274, 46.50931456872113],[6.499322842819743, 46.50916367625139]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.499611692251065, 46.50943905247878],[6.499640876330273, 46.509429434636765],[6.4997273440553345, 46.50952382155408],[6.499698653438254, 46.50953503860594],[6.499611692251065, 46.50943905247878]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.4971637484248825, 46.50717728441658],[6.497242394957704, 46.507197802631104],[6.4974082848490085, 46.50709764359265],[6.4974623351045615, 46.507071650680054],[6.49754618688067, 46.507056710823065],[6.497580923060221, 46.50705599484873],[6.497461089811874, 46.5070215567617],[6.497401130349761, 46.5070424798402],[6.497326387772565, 46.507077547279415],[6.4971637484248825, 46.50717728441658]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.497525311700448, 46.50740501665378],[6.497554464762611, 46.50742228480993],[6.497786260368833, 46.50724350775398],[6.4977576550043405, 46.50722767934881],[6.497525311700448, 46.50740501665378]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.4976269599693195, 46.507434903258776],[6.497654641300087, 46.5074498818317],[6.497704626148659, 46.50740660489698],[6.497676736070574, 46.5073930935242],[6.4976269599693195, 46.507434903258776]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.4978031360427195, 46.50729424139281],[6.497824341305007, 46.50730436586514],[6.4978630256322, 46.50726731008354],[6.497841554074968, 46.50725903537307],[6.4978031360427195, 46.50729424139281]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.496740361875448, 46.507307623459496],[6.496768392153997, 46.50728407218919],[6.4954880716186105, 46.50642135143851],[6.495465022385507, 46.506458578761105],[6.496740361875448, 46.507307623459496]]] } },
    ],
  };

// Cours intérieures privées repérées comme potentiellement intéressantes.
const diagnosticPrivateSpaces = {
    type: "FeatureCollection",
    features: [
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500238266840821, 46.50963041368379],[6.500838514059875, 46.50945240057267],[6.501182956271617, 46.509962044140245],[6.500397555192421, 46.51017963109386],[6.500238266840821, 46.50963041368379]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500224145504925, 46.508965381905476],[6.5001300336692465, 46.50885968042258],[6.500341115114522, 46.50877965838206],[6.500594809088997, 46.50908868925663],[6.500101784085173, 46.50924246275555],[6.500029475709278, 46.50916109624227],[6.500082179248374, 46.5091322613084],[6.500034355233917, 46.50906326980039],[6.500224145504925, 46.508965381905476]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.497873528377307, 46.50730767373011],[6.497953344621687, 46.50724430831081],[6.498227987782245, 46.50738984535604],[6.498489604703154, 46.50754905281343],[6.4987336095445905, 46.50769658536279],[6.498659951396806, 46.50773971748486],[6.498551937138016, 46.507681713167216],[6.498455672699229, 46.50774700438046],[6.498388099090642, 46.50770112116122],[6.498342670640715, 46.50773210539743],[6.498288715907068, 46.50769962154514],[6.498329401517071, 46.50766711473325],[6.498185020191368, 46.507586484918725],[6.498119662352868, 46.507544852126124],[6.497950830158242, 46.50746705455859],[6.49801022250299, 46.507401486653436],[6.497873528377307, 46.50730767373011]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.4988196067176505, 46.508120133073575],[6.4988986520006575, 46.5080609478608],[6.498928172352855, 46.50807843002611],[6.499103425145296, 46.50795750746977],[6.499610701719934, 46.50827699030401],[6.499753371424194, 46.50836499716312],[6.4995007147734825, 46.508503177902746],[6.499419067637224, 46.508419300625945],[6.499339395368361, 46.5083587783249],[6.499278553275894, 46.50839369526954],[6.499157062851216, 46.50831222695216],[6.499117554506885, 46.508337242089546],[6.4989421059571, 46.50821980078427],[6.49896519653552, 46.50820199651411],[6.4988196067176505, 46.508120133073575]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.500589259330797, 46.509426360483786],[6.500768253668868, 46.509364477871294],[6.500596025155879, 46.50909151315645],[6.500417322920595, 46.50914640238783],[6.50046423301168, 46.509213717549905],[6.500452291782481, 46.509219851532926],[6.500499104673504, 46.50928976225069],[6.500589259330797, 46.509426360483786]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.501294318834394, 46.510291726194254],[6.501402567219167, 46.510260191940624],[6.501546058377613, 46.51045800515079],[6.500839987468309, 46.51051645827741],[6.500800583041018, 46.51046765116479],[6.50101045534813, 46.510411546508955],[6.5010407432298605, 46.510443954925684],[6.50135759145815, 46.51040769617023],[6.501294318834394, 46.510291726194254]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.496565998967669, 46.50943605289784],[6.496954512105114, 46.50923086211282],[6.497002211928399, 46.509214405536675],[6.497061458482651, 46.509299198205696],[6.4971035369385675, 46.509286240219154],[6.497121211167242, 46.50931461568846],[6.497214203303892, 46.50928093059529],[6.497257244637756, 46.509336802724334],[6.497389070731319, 46.50928888077702],[6.4974606510813, 46.50937897711501],[6.497377211318052, 46.50941005503585],[6.497478500884026, 46.50953859849562],[6.4973869435690945, 46.509567636076504],[6.497300399580625, 46.50945568963285],[6.497149016162049, 46.50950970780664],[6.497158336251074, 46.50952361905199],[6.496973547357785, 46.5095873544866],[6.496948499781889, 46.50959642385301],[6.496929079242568, 46.50957215540587],[6.496680417570401, 46.509665935868405],[6.496565998967669, 46.50943605289784]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.498644503493989, 46.5107484060673],[6.498787941572029, 46.51086087323155],[6.498772787751484, 46.51089407009109],[6.498801570670819, 46.51092756036073],[6.49901608784314, 46.51088225580008],[6.498969039478508, 46.51077539818817],[6.498851096588272, 46.51067334772454],[6.498644503493989, 46.5107484060673]]] } },
      { type: "Feature", properties: {}, geometry: { type: "Polygon", coordinates: [[[6.498342098715891, 46.510795918765844],[6.498139952954433, 46.510867656815655],[6.498014681221957, 46.510719799940695],[6.497978021458856, 46.51068646538966],[6.498229002160462, 46.51059246721691],[6.498342098715891, 46.510795918765844]]] } },
    ],
  };

// Tracé projeté pour la déviation est-ouest (flux W>E).
const projectAutoWestEast = [
    [6.475438880170141, 46.493852832246844],
    [6.476000172576537, 46.49405090238244],
    [6.47672859907116, 46.49430208799687],
    [6.477772359644058, 46.49466423033653],
    [6.478949884912211, 46.495072219876334],
    [6.479210069596569, 46.49515648782354],
    [6.4793276623746685, 46.495188150783726],
    [6.479493837517201, 46.49522770618859],
    [6.479603563671845, 46.49524588872814],
    [6.479683236649696, 46.495232537384595],
    [6.479721958934533, 46.495234892482195],
    [6.479764178680311, 46.49524231997668],
    [6.479809163990286, 46.49525879172046],
    [6.479839287140332, 46.495284664721076],
    [6.479865662374697, 46.49532849508162],
    [6.479899572613486, 46.49537468389074],
    [6.480111388838777, 46.495491690034356],
    [6.480458038239927, 46.4956597187284],
    [6.4809159723847864, 46.495919341290744],
    [6.481019501497112, 46.49598788091946],
    [6.481154000735081, 46.49609488801033],
    [6.481263318766094, 46.49619116796383],
    [6.4813768815278605, 46.49631157328883],
    [6.481444294880701, 46.496392381380275],
    [6.481532915373931, 46.49651501837458],
    [6.4816079036060055, 46.4966575148148],
    [6.481677201252601, 46.496822552283405],
    [6.481723236431552, 46.49698083949925],
    [6.481739330283024, 46.49708936290098],
    [6.481757639108579, 46.497234628085984],
    [6.481778144342682, 46.497364185877395],
    [6.48181640893618, 46.4974851291487],
    [6.481857946863979, 46.497608022271834],
    [6.4818947923587995, 46.49769874220453],
    [6.481958933921756, 46.497814488374786],
    [6.4820413275810385, 46.49793866081625],
    [6.4821127925509225, 46.49803425866081],
    [6.482330730933213, 46.49828276326062],
    [6.4826198935368575, 46.49859347827354],
    [6.4828678025035344, 46.49884670445154],
    [6.483322248421561, 46.49933566100609],
    [6.4837898323502, 46.499835179667386],
    [6.483948414932256, 46.50000227806349],
    [6.48412306992253, 46.500188087397724],
    [6.48430675068691, 46.50038821181481],
    [6.484420594521441, 46.500503949490636],
    [6.484896503337559, 46.50101346973765],
    [6.48543160785546, 46.501577427428025],
    [6.486146971015576, 46.50231586379342],
    [6.487140258913072, 46.50338165680995],
    [6.487315189913331, 46.50353189292932],
    [6.487423144362949, 46.503596812241604],
    [6.487503316473769, 46.50363755661579],
    [6.487569957522287, 46.50369125666652],
    [6.487591697870939, 46.50374601047083],
    [6.487629170368506, 46.50385771324377],
    [6.4876564482344214, 46.50392585082043],
    [6.488206161106291, 46.50457571654349],
    [6.488767844163757, 46.505110310185195],
    [6.4894236799479, 46.50576135069207],
    [6.489575474749012, 46.505877270335816],
    [6.489686934591452, 46.50593238368506],
    [6.489806692829052, 46.50598413726255],
    [6.4899065415843635, 46.50601313221294],
    [6.490022526400607, 46.50601574193474],
    [6.490088932338006, 46.50603065518515],
    [6.4901602025770755, 46.50607905146955],
    [6.490197618996444, 46.50612796310092],
    [6.4902505865574565, 46.50620679706465],
    [6.490359601514066, 46.50626893280629],
    [6.490598071540348, 46.50635809311396],
    [6.491101320224307, 46.50653658583602],
    [6.491583401380446, 46.50672233853848],
    [6.492079626362064, 46.50692782634631],
    [6.492406202292177, 46.507036645625305],
    [6.492757193406616, 46.507141611117085],
    [6.492973134952843, 46.50719573883076],
    [6.493438638472816, 46.50729012253441],
    [6.494276278864041, 46.50742133899973],
    [6.494660815425619, 46.507466765922246],
    [6.495097949423329, 46.50755299273764],
    [6.495458980345318, 46.507610865379114],
    [6.495795258539998, 46.50766888605738],
    [6.496004223582955, 46.50772670528349],
    [6.496143356694158, 46.507788167946465],
    [6.496196778148725, 46.507832819968975],
    [6.496239030155887, 46.50787483352828],
    [6.496262315590668, 46.507966525232824],
    [6.4962633574141915, 46.50806533105615],
    [6.4962289868215155, 46.50823034117771],
    [6.4961827145200735, 46.5084579485816],
    [6.496156506536173, 46.50860256353123],
    [6.496152919721213, 46.50873126453399],
    [6.496196437877396, 46.50888307244863],
    [6.496331670714012, 46.50912979134079],
    [6.496455846334228, 46.50935761980128],
    [6.496675376095102, 46.50978060124126],
    [6.49684596058913, 46.510091618803116],
    [6.496911344110243, 46.51019951223484],
    [6.497016500956833, 46.51029362642061],
    [6.497147065546922, 46.51039074162605],
    [6.497641270940366, 46.51078420038898],
    [6.497817220320587, 46.51093247441222],
    [6.497914319134943, 46.51099519918903],
    [6.498066341607317, 46.51106770938401],
    [6.498222336684903, 46.51111376255833],
    [6.498307347886911, 46.51113578768276],
    [6.498494672075666, 46.511186232822354],
    [6.498610958096884, 46.51120990851316],
    [6.498709787510966, 46.51122059167368],
    [6.498810312918457, 46.51122096770866],
    [6.498984375834489, 46.511187208301514],
    [6.4993239214333, 46.51111722450242],
    [6.499578139957282, 46.51106413932904],
    [6.499718096942406, 46.51104047729901],
    [6.499834570975561, 46.51104600616779],
    [6.499902784270016, 46.51107897122336],
    [6.499951524880343, 46.51112475641494],
    [6.499983317327823, 46.51117838200685],
    [6.499989757101383, 46.51126717134983],
    [6.499998423051594, 46.511459362188006],
    [6.500017587954549, 46.51160473991302],
    [6.5000384072349116, 46.51171786078964],
    [6.500104927883493, 46.511875146198214],
    [6.500208696121092, 46.51204977634774],
    [6.500275988294159, 46.51214294516022],
    [6.500430503459042, 46.512306791358135],
    [6.500636837836276, 46.512486756888],
    [6.501107840779147, 46.51287345859511],
    [6.501472076642192, 46.5131687067079],
    [6.501959737547365, 46.51360852505935],
    [6.502753475814572, 46.514270455185176],
    [6.503448991160475, 46.51485581787039],
    [6.503778988064871, 46.51514004161702],
    [6.503861173922918, 46.51519996401393],
    [6.5039873549219065, 46.515279077670456],
    [6.504111745048731, 46.51536110372425],
    [6.504232967227997, 46.51542764125428],
    [6.504379320900603, 46.51549947762868],
    [6.505202747230742, 46.51582592371827],
    [6.505430287642122, 46.515902914252116],
    [6.506331035476681, 46.51623430904773],
    [6.506718502049031, 46.516375588280496],
    [6.507273822507548, 46.51655485945028],
    [6.507667650399472, 46.51663546173359],
    [6.508268774603228, 46.51669782869686],
    [6.509775000364202, 46.51688078508987],
    [6.511837367287607, 46.517109674193165],
    [6.513557954357473, 46.51731149458932],
    [6.51535389273544, 46.517535072107215],
    [6.517030587336146, 46.517726414009346],
    [6.517565880896437, 46.51778699775024],
    [6.518401993527096, 46.51785210492954],
    [6.519083507442143, 46.51787765558828],
    [6.519593668067655, 46.51786410749912],
    [6.5212989198154006, 46.51778994088849],
    [6.523726053284224, 46.517664693801734],
  ];

// Variante inverse (flux E>W) pour la même déviation.
const projectAutoEastWest = [
    [6.5249438403401445, 46.51764100313303],
    [6.524363540281023, 46.517652850812055],
    [6.523664620398424, 46.51769420639281],
    [6.520136682884968, 46.51786669985383],
    [6.519159399671542, 46.51791539645402],
    [6.51870765686107, 46.51791915290093],
    [6.518388871250631, 46.51790713209082],
    [6.518005474962164, 46.51787220130699],
    [6.517599766052478, 46.51782238609705],
    [6.517382301932587, 46.517819114514715],
    [6.517214235640277, 46.51780715707446],
    [6.517029465229, 46.517775920476076],
    [6.516889161827616, 46.51774112262715],
    [6.51464095961027, 46.51747905080457],
    [6.511116095167524, 46.51705757280238],
    [6.509437481342511, 46.516870271833504],
    [6.5091429979085795, 46.516845908619096],
    [6.508650981663905, 46.5167897303083],
    [6.50814346450411, 46.51673341421584],
    [6.507681767374885, 46.516674442960095],
    [6.5073612882687035, 46.51661459567832],
    [6.506981540068327, 46.51652263613919],
    [6.505398805166041, 46.51595490159181],
    [6.504831407714093, 46.51573630475121],
    [6.504457927023985, 46.515583206427976],
    [6.5042135209815335, 46.515459306394156],
    [6.503813510346519, 46.515222078510504],
    [6.50364071660654, 46.51509071861165],
    [6.5034182405570355, 46.51490618156059],
    [6.503083909719118, 46.514616395177804],
    [6.502799607245014, 46.51438205097636],
    [6.501888691539219, 46.51360925651665],
    [6.5016043724525865, 46.513379316293886],
    [6.501491052054332, 46.51327710809704],
    [6.501357500152906, 46.513146962132566],
    [6.501083901715028, 46.51291094925959],
    [6.500845118601173, 46.5127176449992],
    [6.500345944476659, 46.51228425053316],
    [6.500232336959184, 46.512151987980985],
    [6.500132599744327, 46.51202719958408],
    [6.50005652984596, 46.511902785584475],
    [6.500012163499454, 46.51177084892313],
    [6.4999725676206745, 46.51166653504287],
    [6.499942758317884, 46.511520952661414],
    [6.49992616783967, 46.511424597038015],
    [6.499924604628083, 46.51120969849228],
    [6.499911057169043, 46.511158736239956],
    [6.499864134867862, 46.51110079688468],
    [6.499773301147564, 46.511063726733674],
    [6.499637319664977, 46.51108051394899],
    [6.499395180438013, 46.511129411879494],
    [6.498832641453795, 46.51123724126737],
    [6.498738344417362, 46.51125912358522],
    [6.498686683287001, 46.51130047154302],
    [6.498645596326312, 46.511319483470615],
    [6.498583292160236, 46.51131660267263],
    [6.498530112220099, 46.5112773874166],
    [6.498427116272456, 46.51121809714359],
    [6.498247748681795, 46.51116877039082],
    [6.4980567416726185, 46.51112128819036],
    [6.497910185672667, 46.51105156692549],
    [6.497717265629119, 46.51090417406055],
    [6.497138916569101, 46.51043402838678],
    [6.496943544589587, 46.51027855177917],
    [6.496900080081103, 46.510242522543976],
    [6.496846385358636, 46.51016986743113],
    [6.496213903590137, 46.50899041002585],
    [6.4961421774968535, 46.508850709017665],
    [6.496126747158361, 46.50879780673402],
    [6.496108331075796, 46.50873455335053],
    [6.496105470337909, 46.508647461295666],
    [6.496126879428859, 46.508488204491485],
    [6.496153684808826, 46.50834306182576],
    [6.496174945470313, 46.50823146055637],
    [6.4961867518818135, 46.5081166963932],
    [6.496207174426581, 46.50803577451221],
    [6.496187826480276, 46.507891530974966],
    [6.496141730323267, 46.507816670086626],
    [6.495942178878271, 46.507723323616865],
    [6.495620480545879, 46.50765860946375],
    [6.4946857741210815, 46.50752371555255],
    [6.493902591453963, 46.50741490458362],
    [6.493597082627333, 46.50736225550887],
    [6.493061483468521, 46.507271164356816],
    [6.492467204061321, 46.50711330486167],
    [6.4917803789156, 46.5069130904889],
    [6.491227595336758, 46.50673815103481],
    [6.490833640502154, 46.50658686378684],
    [6.49052104034603, 46.506432782573974],
    [6.490331289052126, 46.50634348233969],
    [6.49020269128521, 46.50628992968556],
    [6.4901292030788325, 46.50626258567201],
    [6.4900478436691325, 46.50627299063083],
    [6.489957731861925, 46.50627736304648],
    [6.489888253639207, 46.50625951048737],
    [6.489833136869184, 46.50623301359043],
    [6.489797716260987, 46.50619559174586],
    [6.489766487456298, 46.50616341387621],
    [6.4897223434430185, 46.50610391417789],
    [6.489661883680931, 46.50603517761947],
    [6.48946163756161, 46.50584207366226],
    [6.489042588465566, 46.50543083512194],
    [6.488620316095639, 46.50498512976065],
    [6.487639847091331, 46.503969440698064],
    [6.487531676887111, 46.50387387876689],
    [6.487427173105034, 46.50381558211746],
    [6.487354116914614, 46.50379160343899],
    [6.487307653122615, 46.5037582849724],
    [6.487289583414637, 46.5037306491458],
    [6.487281309686987, 46.50368918756721],
    [6.487282053374728, 46.50364691165492],
    [6.487236069868469, 46.50355254284246],
    [6.486986322187438, 46.50324908083267],
    [6.4862303215327755, 46.50246988188359],
    [6.486089629284967, 46.50231497169125],
    [6.485786246639676, 46.50199056943079],
    [6.485644844268536, 46.50184741858635],
    [6.485120267687114, 46.50130034354341],
    [6.484689974242023, 46.50084767466122],
    [6.484381907840762, 46.50055120199006],
    [6.484275328130416, 46.50044390613966],
    [6.484186581275758, 46.50032276508163],
    [6.48411379925866, 46.50024028430137],
    [6.483817042780998, 46.499894712703295],
    [6.483244264611811, 46.499290297170425],
    [6.482642832380571, 46.49865618355146],
    [6.482260335145672, 46.49824493039524],
    [6.48215714564966, 46.498126104567945],
    [6.48210115873045, 46.4980609003216],
    [6.481999657764525, 46.497934510771614],
    [6.481914214814045, 46.49779970273288],
    [6.481817627068903, 46.49760227522283],
    [6.481747348345961, 46.4973584891483],
    [6.481714749088281, 46.497162051714064],
    [6.481693026422345, 46.49701751802261],
    [6.481681999313907, 46.496963295231886],
    [6.481651629300928, 46.49685406428067],
    [6.481604673310315, 46.49673020843091],
    [6.481535563728803, 46.49659568488944],
    [6.481465099318921, 46.496478857593324],
    [6.4813209019982025, 46.496302426278255],
    [6.481137611933369, 46.49612433145852],
    [6.480906016642481, 46.49594535602765],
    [6.480637086215832, 46.49579185594773],
    [6.480148432515912, 46.49554809905283],
    [6.479901605614928, 46.49545872181033],
    [6.479803715837535, 46.49543669292265],
    [6.479731454441613, 46.49543976293943],
    [6.4796599674438395, 46.49543915847313],
    [6.479603944849873, 46.49541685835733],
    [6.479557161547394, 46.49538692711545],
    [6.479515621858892, 46.495345156502445],
    [6.479461779563619, 46.495306173242206],
    [6.479252438834987, 46.49520341483372],
    [6.478969847286414, 46.49510705456711],
    [6.478380791426263, 46.49490156829906],
    [6.477949050365262, 46.49475531836004],
    [6.4773170715226485, 46.494531476463344],
    [6.4764397390497175, 46.49423027475161],
    [6.475664398093551, 46.49395602988253],
    [6.4750753299685195, 46.49375340271848],
    [6.474202385130171, 46.49345630127976],
  ];

// Assemblage final des axes projetés (utilisé côté carte projet).
const projectAutoAxes = {
    type: "FeatureCollection",
    features: [
      {
        type: "Feature",
        properties: { id: "project-axis-1" },
        geometry: { type: "LineString", coordinates: projectAutoWestEast },
      },
      {
        type: "Feature",
        properties: { id: "project-axis-2" },
        geometry: { type: "LineString", coordinates: projectAutoEastWest },
      },
    ],
  };

export const diagnosticGeojson = { zoneCoords, focusZone, noiseMaskCoords, maskGeoJson, diagnosticAutoAxesPrimary, diagnosticAutoAxesSecondary, diagnosticAutoAxesTertiary, diagnosticLakeViews, diagnosticParkingSurfaces, diagnosticPrivateSpaces, projectAutoWestEast, projectAutoEastWest, projectAutoAxes };
